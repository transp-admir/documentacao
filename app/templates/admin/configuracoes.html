{% extends "base.html" %}

{# Este bloco assume que você tem um `admin_base.html` ou similar. Se não, use `base.html` e ajuste a navegação. #}
{% block navigation %}
<nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
        SGV Admin
    </div>
    <ul class="sidebar-nav">
        {% set current_page = request.endpoint %}
        <li class="{{ 'active' if 'admin.admin_dashboard' in current_page else '' }}"><a href="{{ url_for('admin.admin_dashboard') }}"><i class="fas fa-home"></i> Dashboard</a></li>
        <li class="{{ 'active' if 'admin.gerenciar_empresas' in current_page else '' }}"><a href="{{ url_for('admin.gerenciar_empresas') }}"><i class="fas fa-building"></i> Gerenciar Empresas</a></li>
        <li class="{{ 'active' if 'admin.gerenciar_motoristas' in current_page else '' }}"><a href="{{ url_for('admin.gerenciar_motoristas') }}"><i class="fas fa-user-tie"></i> Gerenciar Motoristas</a></li>
        <li class="{{ 'active' if 'admin.gerenciar_veiculos' in current_page else '' }}"><a href="{{ url_for('admin.gerenciar_veiculos') }}"><i class="fas fa-truck"></i> Gerenciar Veículos</a></li>
        <li class="{{ 'active' if 'admin.upload_page' in current_page else '' }}"><a href="{{ url_for('admin.upload_page') }}"><i class="fas fa-file-upload"></i> Upload de Documentos</a></li>
        <li class="{{ 'active' if 'admin.gerenciar_configuracoes' in current_page else '' }}"><a href="{{ url_for('admin.gerenciar_configuracoes') }}"><i class="fas fa-cogs"></i> Configurações</a></li>
        <li class="{{ 'active' if 'admin.gerar_convite' in current_page else '' }}"><a href="{{ url_for('admin.gerar_convite') }}"><i class="fas fa-link"></i> Convidar Empresa</a></li>
    </ul>
    <ul class="sidebar-nav">
        <li class="logout-link"><a href="{{ url_for('auth.logout') }}"><i class="fas fa-sign-out-alt"></i> Sair</a></li>
    </ul>
</nav>
<div class="mobile-header">
    <span class="mobile-title">SGV Admin</span>
    <button class="menu-toggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
</div>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <h4 class="mb-4">Configurações de Alertas de Vencimento</h4>

    <div class="card">
        <div class="card-header">
            <i class="fas fa-cogs"></i> Prazos para Notificação
        </div>
        <div class="card-body">
            <p class="card-text">Defina com quantos dias de antecedência o sistema deve começar a alertar sobre o vencimento de cada tipo de documento. Os documentos já vencidos sempre serão exibidos.</p>
            
            <form method="POST" action="{{ url_for('admin.salvar_configuracoes') }}">
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-light">
                            <tr>
                                <th style="width: 60%;">Tipo de Documento</th>
                                <th>Prazo do Alerta (dias)</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for doc_type, prazo in configuracoes.items() %}
                            <tr>
                                <td>
                                    <label for="prazo_{{ doc_type }}" class="form-label fw-bold">{{ doc_type }}</label>
                                </td>
                                <td>
                                    <input type="number" class="form-control" id="prazo_{{ doc_type }}" name="prazo_{{ doc_type }}" value="{{ prazo }}" min="1" required>
                                </td>
                            </tr>
                            {% else %}
                            <tr>
                                <td colspan="2" class="text-center">Nenhum tipo de documento encontrado no sistema ainda. Adicione alguns documentos para poder configurar os alertas.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% if configuracoes %}
                <div class="mt-3 text-end">
                    <button type="submit" class="btn btn-primary">Salvar Configurações</button>
                </div>
                {% endif %}
            </form>
        </div>
    </div>
</div>
{% endblock %}
